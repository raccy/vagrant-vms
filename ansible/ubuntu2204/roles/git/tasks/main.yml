- name: apt install git
  become: yes
  apt:
    name: git
    state: present

- name: git config user.name
  git_config:
    scope: global
    name: user.name
    value: '{{ git.config.user.name }}'
  when: git.config.user.name is defined

- name: git config user.email
  git_config:
    scope: global
    name: user.email
    value: '{{ git.config.user.email }}'
  when: git.config.user.email is defined

- name: git config pull.rebase
  git_config:
    scope: global
    name: pull.rebase
    value: 'false'
